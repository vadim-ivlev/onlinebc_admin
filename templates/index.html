<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>onlinebc_admin API RG.RU</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css"> -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.2.2/jquery.form.min.js"></script>
    <script src="templates/jquery.json-viewer.js"></script>


    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css"> -->
    <!-- <link rel="stylesheet" href="//cdn.rawgit.com/necolas/normalize.css/master/normalize.css"> -->

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <link rel="stylesheet" href="//cdn.rawgit.com/necolas/normalize.css/master/normalize.css">
    <link rel="stylesheet" href="//cdn.rawgit.com/milligram/milligram/master/dist/milligram.min.css">



    <!-- <link rel="stylesheet" type="text/css" href="templates/index.css" /> -->
    <!-- <style>{{template "index.css"}}</style> -->
    <link rel="stylesheet" type="text/css" href="templates/index.css" />
    <style>{{template "jquery.json-viewer.css"}}</style>


</head>

<body>
    <h1><span class="rgru"><span>RG.</span><span class="or">RU</span></span></h1>
    <h3>GraphQL & REST API трансляций RG.RU</h3>
    <p><a target="_blank" href="docs/">Документация (в новом окне) &#x25B6;</a></p>

    <p><a target="_blank" href="templates/upload.html">Тестовая форма для загрузки изображений и видео (в новом окне) &#x25B6;</a></p>



    <!-- <h5>Внутренний API Онлайн трансляций </h4> -->
        <h4>GraphQL API</h4>
        <ol>
            {{range $i, $r := .}}


            {{if eq .Example "/api/get_video/1"}}<h4>REST API</h4>{{end}}
            <!-- {{if eq .Path "/"}}<h4>Общий API</h4>{{end}} -->
            {{if eq .Path "/api/broadcasts"}}<h4>Публичный API </h4>{{end}}


            <li>
                <div class="comment"><span class="path">{{.Path}}</span> {{.Comment | noescape }}</div>
                <div>
                    <div><span class="param-name">Methods</span>{{range .Methods}}<span class="class-{{.}}">{{.}}</span>&nbsp;&nbsp;{{end}}</div>
                    <div><span class="param-name">URL</span>{{.Path}}</div>
                    <div><span class="param-name">test URL </span><input id="example{{$i}}" type="text" value="{{.Example}}"></div>
                    <!-- enctype="multipart/form-data"  -->
                    
                    <div style="display: flex;">
                        <form  id="form{{$i}}" onsubmit="
                        event.preventDefault();
                        $(this).ajaxSubmit({
                            url: $('#example{{$i}}').val(), 
                            type: '{{index .Methods 0}}',
                            //success: function(response) {$('#result{{$i}}').text(JSON.stringify(response, null,'  '));}
                            success: function(response) {$('#result{{$i}}').jsonViewer(response, {collapsed: true, rootCollapsable: false});}
                        });">
                            {{if .Params}}
                                {{range .Params }}
                                    {{if .Name}}
                                    <div style="display: flex;" >
                                        <div>
                                            <span class="form-param-name">{{.Name}}</span><br>
                                        </div>
                                        <div>
                                        {{if or (eq .Name "query") (eq .Name "variables") }}
                                            <textarea name="{{.Name}}">{{.Test}}</textarea>
                                        {{else}}
                                            <input type="{{.Inptype}}" name="{{.Name}}" value="{{.Test}}">
                                        {{end}}
                                            {{if .Comment}}<div class="param-comment">{{.Comment | noescape}}</div>{{end}}
                                        </div>
                                    </div>
                                    {{end}}
                                {{end}}
                            {{end}}
                            <div>
                                <span class="param-name"></span>
                                <input type="submit" value="TEST">
                            </div>

                        </form>
                        <pre  id="result{{$i}}"></pre>
                    </div>
                </div>
            </li>
            {{end}}
        </ol>
    
        <script>
        {{template "index.js"}}
        </script>
</body>

</html>